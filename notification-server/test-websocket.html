<!DOCTYPE html>
<html>
<head>
    <title>WebSocket 테스트</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>알림 서버 WebSocket 테스트</h1>
    <div id="status">연결 상태: 대기 중...</div>
    <div id="messages"></div>

    <script>
        const socket = io('http://localhost:3000', {
            auth: {
                userId: 1,
                roles: ['USER']
            }
        });

        socket.on('connect', () => {
            document.getElementById('status').innerHTML = '연결 상태: 연결됨 ✅';
            console.log('WebSocket 연결 성공!');
        });

        socket.on('disconnect', () => {
            document.getElementById('status').innerHTML = '연결 상태: 연결 끊김 ❌';
            console.log('WebSocket 연결 끊김');
        });

        socket.on('newNotification', (notification) => {
            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML += `<p>새 알림: ${JSON.stringify(notification)}</p>`;
            console.log('새 알림 수신:', notification);
        });

        socket.on('connect_error', (error) => {
            document.getElementById('status').innerHTML = '연결 상태: 오류 ❌';
            console.error('WebSocket 연결 오류:', error);
        });
    </script>
</body>
</html> 