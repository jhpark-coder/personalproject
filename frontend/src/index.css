/* 전체 디자인 시스템 */
:root {
  /* ===== Primary (신뢰성 + 활동성) ===== */
  --primary: #2563EB;         /* 더 활기찬 블루 (기존 #334155 대신) */
  --primary-dark: #1D4ED8;    /* 깊이감 있는 블루 */
  --primary-light: #DBEAFE;   /* 부드러운 배경용 */

  /* ===== Accent (피트니스 특화) ===== */
  --accent-energy: #F97316;   /* 오렌지 (운동 에너지, CTA) */
  --accent-energy-dark: #EA580C;  /* hover state */
  --accent-success: #10B981;  /* 민트그린 (성취/목표달성) */
  --accent-success-dark: #18A27D; /* hover state */
  --accent-focus: #8B5CF6;    /* 보라 (집중/명상/프리미엄) */

  /* ===== Semantic (기능적 색상) ===== */
  --success: #059669;         /* 성공/완료 */
  --warning: #F59E0B;         /* 주의/경고 */
  --danger: #DC2626;          /* 위험/오류 */
  --info: #0EA5E9;           /* 정보/가이드 */

  /* ===== Fitness Tracking (운동 데이터 표현) ===== */
  --cardio: #EF4444;         /* 유산소 운동 (심박수, 달리기) */
  --strength: #8B5CF6;       /* 근력 운동 (웨이트, 근육) */  
  --flexibility: #10B981;    /* 유연성/요가 (스트레칭) */
  --recovery: #6B7280;       /* 휴식/회복 (수면, 휴식일) */

  /* ===== Grayscale (기존 유지) ===== */
  --white: #FFFFFF;
  --gray-50: #F8F9FA;
  --gray-100: #F1F3F4;
  --gray-200: #E8EAED;
  --gray-300: #DADCE0;
  --gray-400: #BDC1C6;
  --gray-500: #9AA0A6;
  --gray-600: #80868B;
  --gray-700: #5F6368;
  --gray-800: #3C4043;
  --gray-900: #202124;
  --black: #000000;
  
  /* 그림자 */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  
  /* 간격 */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  
  /* 둥근 모서리 */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.5rem;
  
  /* 폰트 크기 */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;
  --text-4xl: 2.25rem;
  --content-max: 1080px;

  /* ===== Chart & Data Visualization ===== */
  --chart-active: var(--primary);
  --chart-neutral: var(--gray-300);
  --chart-progress: var(--accent-success);
  --chart-goal: var(--accent-energy);
  /* Secondary palette for charts */
  --secondary-red: #EF4444;    /* 체지방 등 경고/감소 경향 */
  --secondary-green: #10B981;  /* 체중 안정/개선 경향 */
  --secondary-orange: #F59E0B; /* 중간 강도/중립 오렌지 */

  /* ===== Legacy Support (Phase-out 예정) ===== */
  --legacy-blue: #007AFF;              /* 기존 iOS 스타일 */
  --legacy-coral: #FF6B6B;            /* 기존 coral */
  --legacy-mint: #20C997;             /* 기존 mint */
  --primary-blue: #007AFF;            /* 임시 호환성 */
  --brand-primary: #334155;           /* 임시 호환성 */
  --brand-primary-strong: #1F2937;    /* 임시 호환성 */
  --accent-coral: #FF6B6B;            /* 임시 호환성 */
  --accent-coral-dark: #E85C5C;       /* 임시 호환성 */
  --accent-mint: #20C997;             /* 임시 호환성 */
  --accent-mint-dark: #18A27D;        /* 임시 호환성 */
}
@media (min-width: 1280px) {
  :root { --content-max: 1200px; }
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Pretendard Variable", "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, "Roboto", "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--gray-50);
  color: var(--gray-900);
  line-height: 1.6;
}

/* 공통: 페이지 컨테이너 마지막 요소 하단 여백 제거 */
.container > :last-child,
.dashboard-content > :last-child,
.workout-stats-container > :last-child,
.body-data-container > :last-child,
.notification-center > :last-child,
.exercise-information-container > :last-child {
  margin-bottom: 0 !important;
}

/* 공통: 하단 안전영역 간격만 유지 */
.container,
.dashboard-container,
.workout-stats-container,
.body-data-container,
.notification-center,
.exercise-information-container {
  padding-bottom: env(safe-area-inset-bottom);
}

/* 공통 컴포넌트 스타일 */
.container {
  width: 100%;
  margin: 0 auto;
  background-color: var(--white);
  min-height: 100dvh;
  position: relative;
  max-width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* 반응형 컨테이너 최대폭 - PC 이전까지는 화면 가득 */
@media (max-width: 1023px) {
  .container { 
    max-width: 100vw; /* 뷰포트 전체 폭 사용 */
    width: 100vw;
    margin: 0;
    padding: 0;
    align-items: stretch; /* 자식 요소들이 가득 채우도록 */
  }
}

/* PC 화면에서만 최대폭 제한 */
@media (min-width: 1024px) {
  .container { max-width: var(--content-max); }
}
@media (min-width: 1280px) {
  .container { max-width: 1200px; }
}

/* 대시보드 헤더만 특정하게 타겟 */
.dashboard-container .header {
  background: var(--white);
  padding: var(--spacing-xl) var(--spacing-lg);
  border-bottom: 1px solid var(--gray-200);
  position: relative; /* sticky 제거 */
  width: 100%;
  box-shadow: var(--shadow-sm);
  margin-bottom: var(--spacing-sm);
}

/* 대시보드 헤더 콘텐츠만 특정하게 타겟 - content-wrapper와 header-content 둘 다 클래스명 포함 */
.dashboard-container .header .header-content.content-wrapper {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 0 var(--spacing-lg); /* 좌우 패딩 명시적으로 설정 */
}

.header-title {
  font-size: var(--text-xl);
  font-weight: 700;
  color: var(--gray-900);
}

.back-button {
  background: none;
  border: none;
  font-size: var(--text-lg);
  color: var(--gray-700);
  cursor: pointer;
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  transition: background-color 0.2s;
}

.back-button:hover {
  background-color: var(--gray-100);
}

.progress-bar {
  width: 100%;
  height: 4px;
  background-color: var(--gray-200);
  border-radius: 2px;
  overflow: hidden;
  margin: var(--spacing-sm) 0;
}

.progress-fill {
  height: 100%;
  background-color: var(--primary-blue);
  transition: width 0.3s ease;
}

.card {
  background-color: var(--white);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  margin: var(--spacing-md) var(--spacing-lg);
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--gray-200);
}

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--spacing-md);
}

.card-title {
  font-size: var(--text-lg);
  font-weight: 600;
  color: var(--gray-900);
}

.card-subtitle {
  font-size: var(--text-sm);
  color: var(--gray-600);
  margin-top: var(--spacing-xs);
}

.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-md) var(--spacing-lg);
  border-radius: var(--radius-md);
  font-size: var(--text-base);
  font-weight: 600;
  text-decoration: none;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  min-height: 48px;
}

.button-primary {
  background-color: var(--accent-energy);
  color: var(--white);
}

.button-primary:hover {
  background-color: var(--accent-energy-dark);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.button-secondary {
  background-color: var(--gray-100);
  color: var(--gray-700);
  border: 1px solid var(--gray-300);
}

.button-secondary:hover {
  background-color: var(--gray-200);
}

.button-full {
  width: 100%;
}

.tag {
  display: inline-flex;
  align-items: center;
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.tag-beginner {
  background-color: var(--secondary-green);
  color: var(--white);
}

.tag-intermediate {
  background-color: var(--secondary-orange);
  color: var(--white);
}

.tag-advanced {
  background-color: var(--secondary-red);
  color: var(--white);
}

/* 피트니스 특화 유틸리티 클래스 */
.fitness-energy {
  color: var(--accent-energy);
}

.fitness-success {
  color: var(--accent-success);
}

.fitness-focus {
  color: var(--accent-focus);
}

.bg-fitness-energy {
  background-color: var(--accent-energy);
  color: var(--white);
}

.bg-fitness-success {
  background-color: var(--accent-success);
  color: var(--white);
}

.bg-fitness-focus {
  background-color: var(--accent-focus);
  color: var(--white);
}

/* 하단 네비게이션 바 */
.navigation-bar {
  position: fixed;
  bottom: env(safe-area-inset-bottom, 0);
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  max-width: 480px;
  background-color: var(--white);
  border-top: 1px solid var(--gray-200);
  padding: 6px 8px;
  display: flex;
  justify-content: space-around;
  z-index: 100;
  height: 56px;
}

@media (max-width: 480px) {
  .navigation-bar {
    left: 50%;
    right: auto;
    transform: translateX(-50%);
    width: calc(100% - 32px);
    max-width: none;
    padding: 4px 2px;
    height: 56px;
    bottom: env(safe-area-inset-bottom, 0);
  }
}

/* 데스크톱(>=1024px)에서는 하단 네비게이션 바 숨김 */
@media (min-width: 1024px) {
  .navigation-bar { display: none; }
}

@media (min-width: 481px) and (max-width: 1023px) {
  /* 컨텐츠 좌우 16px 여백을 반영해 네비 폭을 동적으로 설정 */
  .navigation-bar {
    left: 50%;
    right: auto;
    transform: translateX(-50%);
    width: calc(100% - 32px);
    max-width: none;
  }
  .nav-item { font-size: 0.8rem; padding-bottom: 2px; }
  .nav-icon { font-size: 1.3rem; margin-bottom: 4px; }
  .nav-item span { line-height: 1; }
}

@media (max-width: 1023px) {
  .navigation-bar {
    left: 16px;
    right: 16px;
    transform: none;
    width: auto;
    max-width: none;
  }
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--spacing-xs);
  color: var(--gray-500);
  text-decoration: none;
  font-size: 0.7rem;
  transition: color 0.2s;
  min-width: 0;
  flex: 1;
}

.nav-item.active {
  color: var(--primary-blue);
}

.nav-icon {
  font-size: 1.2rem;
  margin-bottom: 2px;
  position: relative;
}

.notification-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  background-color: var(--danger);
  color: white;
  border-radius: 50%;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.6rem;
  font-weight: bold;
  min-width: 16px;
}

/* 실외 사용을 위한 개선사항 */
@media (max-width: 480px) {
  .container {
    max-width: 100%;
  }
  
  .card {
    margin: var(--spacing-sm);
    padding: var(--spacing-md);
  }
  
  .button {
    min-height: 56px; /* 터치하기 쉽게 크게 */
  }
  
  .header-title {
    font-size: var(--text-lg);
  }
  
  .navigation-bar {
    max-width: 100%;
    padding: 4px 2px;
    height: 56px; /* 모바일에서도 동일 높이 */
    bottom: env(safe-area-inset-bottom, 0);
  }
  
  .nav-item {
    font-size: 0.65rem;
    padding: 4px 2px;
  }
  
  .nav-icon {
    font-size: 1.1rem;
    margin-bottom: 1px;
  }
}

/* 고대비 모드 지원 */
@media (prefers-contrast: high) {
  :root {
    --gray-200: #000000;
    --gray-300: #000000;
    --gray-400: #000000;
  }
  
  .card {
    border: 2px solid var(--gray-900);
  }
  
  .button {
    border: 2px solid currentColor;
  }
}

/* 다크모드 지원 */
@media (prefers-color-scheme: dark) {
  :root {
    --white: #1C1C1E;
    --gray-50: #2C2C2E;
    --gray-100: #3A3A3C;
    --gray-200: #48484A;
    --gray-300: #636366;
    --gray-400: #8E8E93;
    --gray-500: #AEAEB2;
    --gray-600: #C7C7CC;
    --gray-700: #D1D1D6;
    --gray-800: #E5E5EA;
    --gray-900: #F2F2F7;
    --black: #FFFFFF;
  }
}

/* 데스크톱 사이드바 네비게이션 */
.sidebar-navigation {
  position: fixed;
  top: 0;
  left: 0;
  width: 240px;
  height: 100dvh;
  background: var(--brand-primary);
  border-right: 1px solid rgba(0, 0, 0, 0.15);
  padding: 12px 10px;
  display: none; /* 기본 숨김: 모바일 우선 */
  z-index: 90;
  color: #e7e9ee;
}

.sidebar-header {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 800;
  font-size: 16px;
  line-height: 1;
  padding: 12px 10px;
  color: #ffffff;
}

.sidebar-items {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 6px;
}

/* 사이드바 내 항목은 가로 정렬, 컴팩트하게 */
.sidebar-navigation .nav-item {
  flex-direction: row;
  justify-content: flex-start;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 10px;
  color: #aeb4be;
  font-weight: 600;
  text-decoration: none;
  width: 100%;
}

.sidebar-navigation .nav-item .nav-icon {
  font-size: 1.05rem;
  margin: 0;
  width: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.sidebar-navigation .nav-item span {
  font-size: 0.92rem;
}

.sidebar-navigation .nav-item:hover {
  background: rgba(255, 255, 255, 0.08);
  color: #eef2f7;
}

.sidebar-navigation .nav-item.active {
  background: rgba(255, 255, 255, 0.14); /* header tint match */
  color: #ffffff;
  position: relative;
}

.sidebar-navigation .nav-item.active::before {
  content: '';
  position: absolute;
  left: 6px;
  top: 8px;
  bottom: 8px;
  width: 3px;
  background: #ffffff;
  opacity: 0.9;
  border-radius: 6px;
}

/* 배지 대비 향상 */
.sidebar-navigation .notification-badge {
  background-color: #ef4444;
  color: #fff;
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.25);
}

/* 데스크톱에서 사이드바 노출, 하단바 숨김(기존 규칙 유지) */
@media (min-width: 1024px) {
  .sidebar-navigation { 
    display: block; 
    left: 0; 
    position: fixed; 
    top: 0; 
    height: 100vh;
    width: 240px;
  }
  .container { 
    margin-left: 240px; /* 사이드바 바로 옆에 배치 */
    margin-right: 0;
    width: calc(100% - 240px); /* 사이드바를 제외한 나머지 전체 폭 사용 */
    max-width: none; 
    position: relative;
    z-index: 1;
    padding-left: 0;
    padding-right: 0;
  }
}

/* 데스크톱에서 사이드바 여백 제거가 필요한 공개 페이지용 오버라이드 */
@media (min-width: 1024px) {
  .container.no-sidebar { 
    margin-left: 0; 
    padding-left: 0;
    width: 100%; /* 전체 폭 사용 */
  }
}

/* 공통 컨텐츠 래퍼: 데스크톱에서 통일된 폭 유지 */
.content-wrapper {
  width: 100%;
  max-width: 100%; /* 기본적으로 가득 채움 */
  margin: 0 auto;
  padding: 0 8px; /* 모바일/태블릿에서는 최소한의 여백만 */
}

/* 위에서 더 구체적인 셀렉터로 처리했으므로 제거 */

/* PC에서만 폭 제한과 패딩 증가 */
@media (min-width: 1024px) {
  .content-wrapper {
    max-width: var(--content-max);
    padding: 0 16px;
  }
  
  /* 헤더는 별도 패딩 설정 */
  .dashboard-container .header .header-content.content-wrapper {
    padding: 0 var(--spacing-lg);
  }
}

/* 스켈레톤 로딩 유틸리티 */
@keyframes skeleton-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.skeleton {
  position: relative;
  overflow: hidden;
  background: linear-gradient(90deg, var(--gray-100) 25%, var(--gray-200) 37%, var(--gray-100) 63%);
  background-size: 400% 100%;
  animation: skeleton-shimmer 1.4s ease-in-out infinite;
  border-radius: var(--radius-md);
}
.skeleton-bar { height: 12px; }
.skeleton-card { height: 140px; border-radius: var(--radius-lg); }
.skeleton-circle { border-radius: 50%; }

@media (max-width: 1023px) {
  .desktop-only { display: none !important; }
}

@media (min-width: 1024px) {
  /* 데스크톱: 컨텐츠를 가운데 정렬 */
  .container .content-wrapper {
    margin: 0 auto;            /* 가운데 정렬 복구 */
    padding: 0 16px;           /* 좌우 균등한 패딩 */
    max-width: var(--content-max); /* 일관된 최대 폭 */
  }
  
  /* 헤더는 예외: PC에서는 우측 정렬 (제목이 숨겨져 있으므로) */
  .dashboard-container .header .header-content.content-wrapper {
    display: flex;
    align-items: center;
    justify-content: flex-end; /* 우측 정렬로 변경 */
    margin: 0; /* 가운데 정렬 해제 */
    padding: 0 var(--spacing-lg); /* 헤더용 패딩 */
  }
}
